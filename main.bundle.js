(()=>{"use strict";var e={10:(e,t)=>{var r,a,l,c,o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.TitleType=t.ChartType=t.SyncType=t.ComboType=t.Difficulty=t.DifficultyNumber=void 0,function(e){e[e.basic=0]="basic",e[e.advanced=1]="advanced",e[e.expert=2]="expert",e[e.master=3]="master",e[e.remaster=4]="remaster"}(r||(t.DifficultyNumber=r={})),function(e){e[e.Basic=0]="Basic",e[e.Advanced=1]="Advanced",e[e.Expert=2]="Expert",e[e.Master=3]="Master",e[e.ReMaster=4]="ReMaster"}(a||(t.Difficulty=a={})),function(e){e[e.none=-1]="none",e[e.FC=0]="FC",e[e.FCp=1]="FCp",e[e.AP=2]="AP",e[e.APp=3]="APp"}(l||(t.ComboType=l={})),function(e){e[e.none=-1]="none",e[e.FS=0]="FS",e[e.FSp=1]="FSp",e[e.FDX=2]="FDX",e[e.FDXp=3]="FDXp",e[e.SYNC=4]="SYNC"}(c||(t.SyncType=c={})),function(e){e[e.STD=0]="STD",e[e.DX=1]="DX",e[e.UTAGE=2]="UTAGE"}(o||(t.ChartType=o={})),function(e){e[e.Normal=0]="Normal",e[e.Bronze=1]="Bronze",e[e.Silver=2]="Silver",e[e.Gold=3]="Gold",e[e.Rainbow=4]="Rainbow"}(n||(t.TitleType=n={}))},156:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(r(335)),c=a(r(953)),o=a(r(865)),n=a(r(418)),i="https://chart.minecraftpeayer.me/update-data";!function(){let e=document.querySelector(".comment_block"),t=document.createElement("span"),r=document.createElement("a");r.href=i,r.innerText="Upload Data to maibot",r.target="ratingChart",r.className="f_14",r.style="color: rgb(20, 119, 230);",t.onclick=e=>{let t=window.open(i,"ratingChart");window.addEventListener("message",async e=>{t&&("request_playerData"===e.data&&t.postMessage(await(0,n.default)(e),"*"),"request_recentAll"===e.data&&t.postMessage(await(0,c.default)(e),"*"),"string"==typeof e.data&&(e.data.startsWith("request_recentDetail__")&&t.postMessage(await(0,o.default)(e),"*"),e.data.startsWith("request_allScores__")&&t.postMessage(await(0,l.default)(e),"*")))})},t.appendChild(r),e&&e.appendChild(t)}()},335:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t=e.data.split("__")[1],r={type:"scoresData",data:{records:[],difficulty:t}},l=await fetch(`https://maimaidx-eng.com/maimai-mobile/record/musicSort/search/?search=A&sort=1&playCheck=on&diff=${a.DifficultyNumber[t]}`),c=await fetch(`https://maimaidx-eng.com/maimai-mobile/record/musicMybest/search/?diff=${a.DifficultyNumber[t]}`),o=(new DOMParser).parseFromString(await l.text(),"text/html"),n=(new DOMParser).parseFromString(await c.text(),"text/html"),i=o.querySelectorAll(`.music_${t}_score_back`),s=n.querySelectorAll(`.music_${t}_score_back`),p=[],u=[];for(let e of i){let r,l=e.querySelector(".music_name_block").textContent.replace(/[\t\n]+/g,"");switch(e.querySelector(".music_kind_icon").getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_standard":r=a.ChartType.STD;break;case"music_dx":r=a.ChartType.DX;break;default:r=""}let c,o,n=e.querySelector(".music_lv_block").textContent,i=parseFloat(e.querySelectorAll(".music_score_block")[0].textContent.replace(/[\t\n]+/g,"").replace("%","")),s=e.querySelectorAll(".music_score_block")[1].textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e.replace(/,/g,"")));switch(e.querySelectorAll(".h_30.f_r")[0].getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_icon_fs":c=a.SyncType.FS;break;case"music_icon_fsp":c=a.SyncType.FSp;break;case"music_icon_fdx":c=a.SyncType.FDX;break;case"music_icon_fdxp":c=a.SyncType.FDXp;break;case"music_icon_sync":c=a.SyncType.SYNC;break;default:c=a.SyncType.none}switch(e.querySelectorAll(".h_30.f_r")[1].getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_icon_fc":o=a.ComboType.FC;break;case"music_icon_fcp":o=a.ComboType.FCp;break;case"music_icon_ap":o=a.ComboType.AP;break;case"music_icon_app":o=a.ComboType.APp;break;default:o=a.ComboType.none}p.push({name:l,chartType:r,level:n,difficulty:a.DifficultyNumber[t],achievement:i,dxScore:s,syncType:c,comboType:o,playCount:0})}for(let e of s){let r,l=e.querySelector(".music_name_block").textContent.replace(/[\t\n]+/g,"");switch(e.querySelector(".music_kind_icon").getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_standard":r=a.ChartType.STD;break;case"music_dx":r=a.ChartType.DX;break;default:r=-1}let c=e.querySelector(".music_score_block").textContent.replace(/[\t\n]+/g,"").split("：")[1];u.push({name:l,chartType:r,difficulty:t,playCount:c})}for(let e of p){let t=u.find(t=>t.name===e.name&&t.chartType===e.chartType&&t.difficulty===e.difficulty);t&&(e.playCount=parseInt(t.playCount||"0")),r.data.records.push(e)}return r.data.difficulty=t,r};const a=r(10)},418:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t={type:"playerData",data:{playerName:"",rating:0,title:{type:a.TitleType.Normal,text:""},avatar:"",overviewData:{},course:"",class:"",playCount:{all:0,current:0}}},r=await fetch("https://maimaidx-eng.com/maimai-mobile/playerData"),c=(new DOMParser).parseFromString(await r.text(),"text/html");if(!c)return null;const o=c.querySelector(".name_block");if(!o)return null;let n=o.textContent;t.data.playerName=n;let i=c.querySelector(".rating_block");if(!i)return null;let s=i.textContent;t.data.rating=parseInt(s);let p=c.querySelector(".trophy_inner_block");if(!p)return null;let u={text:p.textContent.replace(/[\t\n]+/g,""),type:a.TitleType.Normal};c.querySelector(".trophy_Normal")?u.type=a.TitleType.Normal:c.querySelector(".trophy_Bronze")?u.type=a.TitleType.Bronze:c.querySelector(".trophy_Silver")?u.type=a.TitleType.Silver:c.querySelector(".trophy_Gold")?u.type=a.TitleType.Gold:c.querySelector(".trophy_Rainbow")&&(u.type=a.TitleType.Rainbow),t.data.title=u;let y=c.querySelector(".basic_block > img")?.src;t.data.avatar=y,t.data.overviewData={};let _=c.querySelectorAll(".musiccount_block");for(let e=0;e<_.length;e++){const r=l.indexDefine[e];if("string"==typeof r){let a=_[e]?.textContent||"";a=a.replace(/[\t\n]+/g,"").replace(/,/g,""),t.data.overviewData[r]=a.split("/").map(e=>parseInt(e))}}let d=c.querySelectorAll(".h_35.f_l")[0],f=c.querySelectorAll(".h_35.f_l")[1];if(!d||!f)return null;let m=d.getAttribute("src"),S=f.getAttribute("src");if(!m||!S)return null;t.data.course=m,t.data.class=S;let b=c.querySelector(".m_5.m_b_5.t_r.f_12");if(!b)return null;let g=b.innerHTML.replace("<br>","\n"),x=parseInt(g.split("\n")[1]?.split("：")[1]||"0"),h=parseInt(g.split("\n")[0]?.split("：")[1]||"0");return t.data.playCount={all:x,current:h},t};const a=r(10),l=r(678)},678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DifficultyStringId=t.indexDefine=void 0;const a=r(10);t.indexDefine=["SSSp","APp","SSS","AP","SSp","FCp","SS","FC","Sp","FDXp","S","FDX","CLEAR","FSp","dxstar_5","FS","dxstar_4","SYNCPLAY","dxstar_3","dxstar_2","dxstar_1"];const l={[a.Difficulty.Basic]:"basic",[a.Difficulty.Advanced]:"advanced",[a.Difficulty.Expert]:"expert",[a.Difficulty.Master]:"master",[a.Difficulty.ReMaster]:"remaster"};t.DifficultyStringId=l},865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t,r=e.data.split("__")[1],c={type:"recentDetail",data:{}},o=await fetch(`https://maimaidx-eng.com/maimai-mobile/record/playlogDetail?idx=${r}`),n=(new DOMParser).parseFromString(await o.text(),"text/html"),i=n.querySelector(".p_10.t_l.f_0.v_b"),s=parseInt(i.querySelectorAll(".playlog_top_container.p_r > .sub_title > span")[0]?.textContent.replace(/TRACK /g,"")||"-1"),p=new Date(`${i.querySelectorAll(".playlog_top_container.p_r > .sub_title > span")[1]?.textContent} GMT+9`);t=i.querySelector(".playlog_remaster_container")?l.Difficulty.ReMaster:i.querySelector(".playlog_master_container")?l.Difficulty.Master:i.querySelector(".playlog_expert_container")?l.Difficulty.Expert:i.querySelector(".playlog_advanced_container")?l.Difficulty.Advanced:l.Difficulty.Basic;let u,y=i.querySelector(`.playlog_${a.DifficultyStringId[t]}_container > .basic_block`).textContent.replace(i.querySelector(".w_80.f_r > .music_lv_back").textContent,"").replace(/[\t\n]+/g,""),_=i.querySelector(".w_80.f_r > .music_lv_back").textContent,d=i.querySelector(".playlog_music_kind_icon").getAttribute("src").split("?")[0].split("/");switch(d[d.length-1]?.replace(".png","")){case"music_standard":u=l.ChartType.STD;break;case"music_dx":u=l.ChartType.DX}let f=parseFloat(i.querySelector(".playlog_achievement_txt").textContent.replace("%","")),m=!!i.querySelector(".playlog_achievement_newrecord");console.log(i.querySelector(".playlog_score_block").textContent);let S,b,g=i.querySelector(".playlog_score_block").textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e.replace(/,/g,""))),x=!!i.querySelector(".playlog_deluxscore_newrecord");if(null===i.querySelector(".playlog_deluxscore_star"))S=0;else{let e=i.querySelector(".playlog_deluxscore_star").getAttribute("src").split("?")[0].split("/");switch(e[e.length-1]?.replace(".png","")){case"dxstar_1":S=1;break;case"dxstar_2":S=2;break;case"dxstar_3":S=3;break;case"dxstar_4":S=4;break;case"dxstar_5":S=5;break;default:S=0}}let h,T=i.querySelectorAll(".playlog_result_innerblock > img")[0].getAttribute("src").split("?")[0].split("/");switch(T[T.length-1]?.replace(".png","")){case"fc":b=l.ComboType.FC;break;case"fcplus":b=l.ComboType.FCp;break;case"ap":b=l.ComboType.AP;break;case"applus":b=l.ComboType.APp;break;default:b=l.ComboType.none}let C=i.querySelectorAll(".playlog_result_innerblock > img")[1].getAttribute("src").split("?")[0].split("/");switch(C[C.length-1]?.replace(".png","")){case"sync":h=l.SyncType.SYNC;break;case"fs":h=l.SyncType.FS;break;case"fsplus":h=l.SyncType.FSp;break;case"fsd":h=l.SyncType.FDX;break;case"fsdplus":h=l.SyncType.FDXp;break;default:h=l.SyncType.none}let k={},q=n.querySelector(".playlog_notes_detail"),D=["","tap","hold","slide","touch","break"];for(let e=1;e<D.length;e++)q.querySelectorAll("tr")[e].querySelectorAll("td").forEach(t=>{let r=0===t.textContent.trim().length?"-":t.textContent.trim();k[D[e]||0]||(k[D[e]||0]=[]),k[D[e]||0]?.push(r)});let A=n.querySelectorAll(".gray_block > .p_5 > .col2 > .playlog_score_block")[0].textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e)),v=n.querySelectorAll(".gray_block > .p_5 > .col2 > .playlog_score_block")[1],w=1===v.textContent.replace(/[\t\n]+/g,"").split("/").length?[-1,-1]:v.textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e)),F=[];return n.querySelectorAll(".playlog_fl_block > .w_96.f_l.t_r > .p_t_5").forEach(e=>F.push(parseInt(e.textContent.replace(/[\t\n]+/g,"")))),c.data={track:s,time:p,difficulty:t,chartType:u,level:_,songName:y,achievement:f,achievementNewRecord:m,dxScore:g,dxScoreNewRecord:x,dxStar:S,fcType:b,syncType:h,fastLate:{fast:F[0],late:F[1]},idx:r,noteDetail:k,combo:A,sync:w},c};const a=r(678),l=r(10)},953:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t={type:"recentAll",data:{records:[]}},r=await fetch("https://maimaidx-eng.com/maimai-mobile/record/");return(new DOMParser).parseFromString(await r.text(),"text/html").querySelectorAll(".p_10.t_l.f_0.v_b").forEach(e=>{const r=e.querySelectorAll(".playlog_top_container.p_r > .sub_title > span");if(!r)return;let c,o=parseInt(r[0]?.textContent?.replace(/TRACK /g,"")||"0"),n=new Date(`${r[1]?.textContent||""} GMT+9`);c=e.querySelector(".playlog_remaster_container")?l.Difficulty.ReMaster:e.querySelector(".playlog_master_container")?l.Difficulty.Master:e.querySelector(".playlog_expert_container")?l.Difficulty.Expert:e.querySelector(".playlog_advanced_container")?l.Difficulty.Advanced:l.Difficulty.Basic;const i=e.querySelector(`.playlog_${a.DifficultyStringId[c]}_container > .basic_block`);if(!i)return;let s,p=i.textContent.replace(e.querySelector(".w_80.f_r > .music_lv_back").textContent,"").replace(/[\t\n]+/g,""),u=e.querySelector(".w_80.f_r > .music_lv_back").textContent,y=e.querySelector(".playlog_music_kind_icon").getAttribute("src").split("?")[0].split("/");switch(y[y.length-1]?.replace(".png","")){case"music_standard":s=l.ChartType.STD;break;case"music_dx":s=l.ChartType.DX}let _,d,f=parseFloat(e.querySelector(".playlog_achievement_txt").textContent.replace("%","")),m=!!e.querySelector(".playlog_achievement_newrecord"),S=e.querySelector(".playlog_score_block").textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e.replace(/,/g,""))),b=!!e.querySelector(".playlog_deluxscore_newrecord");if(null===e.querySelector(".playlog_deluxscore_star"))_=0;else{let t=e.querySelector(".playlog_deluxscore_star").getAttribute("src").split("?")[0].split("/");switch(t[t.length-1]?.replace(".png","")){case"dxstar_1":_=1;break;case"dxstar_2":_=2;break;case"dxstar_3":_=3;break;case"dxstar_4":_=4;break;case"dxstar_5":_=5;break;default:_=0}}let g,x=e.querySelectorAll(".playlog_result_innerblock > img")[0].getAttribute("src").split("?")[0].split("/");switch(x[x.length-1]?.replace(".png","")){case"fc":d=l.ComboType.FC;break;case"fcplus":d=l.ComboType.FCp;break;case"ap":d=l.ComboType.AP;break;case"applus":d=l.ComboType.APp;break;default:d=l.ComboType.none}let h=e.querySelectorAll(".playlog_result_innerblock > img")[1].getAttribute("src").split("?")[0].split("/");switch(h[h.length-1]?.replace(".png","")){case"sync":g=l.SyncType.SYNC;break;case"fs":g=l.SyncType.FS;break;case"fsplus":g=l.SyncType.FSp;break;case"fsd":g=l.SyncType.FDX;break;case"fsdplus":g=l.SyncType.FDXp;break;default:g=l.SyncType.none}let T={track:o,time:n,difficulty:c,chartType:s,level:u,songName:p,achievement:f,achievementNewRecord:m,dxScore:S,dxScoreNewRecord:b,dxStar:_,fcType:d,syncType:g,idx:e.querySelector('form > input[name="idx"]').getAttribute("value")};t.data.records.push(T)}),t};const a=r(678),l=r(10)}},t={};!function r(a){var l=t[a];if(void 0!==l)return l.exports;var c=t[a]={exports:{}};return e[a].call(c.exports,c,c.exports,r),c.exports}(156)})();