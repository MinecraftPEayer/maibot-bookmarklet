(()=>{"use strict";var e={10:(e,t)=>{var r,l,a,c,o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.TitleType=t.ChartType=t.SyncType=t.ComboType=t.Difficulty=t.DifficultyNumber=void 0,function(e){e[e.basic=0]="basic",e[e.advanced=1]="advanced",e[e.expert=2]="expert",e[e.master=3]="master",e[e.remaster=4]="remaster"}(r||(t.DifficultyNumber=r={})),function(e){e[e.Basic=0]="Basic",e[e.Advanced=1]="Advanced",e[e.Expert=2]="Expert",e[e.Master=3]="Master",e[e.ReMaster=4]="ReMaster"}(l||(t.Difficulty=l={})),function(e){e[e.none=-1]="none",e[e.FC=0]="FC",e[e.FCp=1]="FCp",e[e.AP=2]="AP",e[e.APp=3]="APp"}(a||(t.ComboType=a={})),function(e){e[e.none=-1]="none",e[e.FS=0]="FS",e[e.FSp=1]="FSp",e[e.FDX=2]="FDX",e[e.FDXp=3]="FDXp",e[e.SYNC=4]="SYNC"}(c||(t.SyncType=c={})),function(e){e[e.STD=0]="STD",e[e.DX=1]="DX",e[e.UTAGE=2]="UTAGE"}(o||(t.ChartType=o={})),function(e){e[e.Normal=0]="Normal",e[e.Bronze=1]="Bronze",e[e.Silver=2]="Silver",e[e.Gold=3]="Gold",e[e.Rainbow=4]="Rainbow"}(n||(t.TitleType=n={}))},156:function(e,t,r){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),l(r(335)),l(r(953)),l(r(865)),l(r(418))},335:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t=e.data.split("__")[1],r={type:"scoresData",data:{records:[],difficulty:t}},a=await fetch(`https://maimaidx-eng.com/maimai-mobile/record/musicSort/search/?search=A&sort=1&playCheck=on&diff=${l.DifficultyNumber[t]}`),c=await fetch(`https://maimaidx-eng.com/maimai-mobile/record/musicMybest/search/?diff=${l.DifficultyNumber[t]}`),o=(new DOMParser).parseFromString(await a.text(),"text/html"),n=(new DOMParser).parseFromString(await c.text(),"text/html"),i=o.querySelectorAll(`.music_${t}_score_back`),p=n.querySelectorAll(`.music_${t}_score_back`),s=[],y=[];for(let e of i){let r,a=e.querySelector(".music_name_block").textContent.replace(/[\t\n]+/g,"");switch(e.querySelector(".music_kind_icon").getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_standard":r=l.ChartType.STD;break;case"music_dx":r=l.ChartType.DX;break;default:r=""}let c,o,n=e.querySelector(".music_lv_block").textContent,i=parseFloat(e.querySelectorAll(".music_score_block")[0].textContent.replace(/[\t\n]+/g,"").replace("%","")),p=e.querySelectorAll(".music_score_block")[1].textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e.replace(/,/g,"")));switch(e.querySelectorAll(".h_30.f_r")[0].getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_icon_fs":c=l.SyncType.FS;break;case"music_icon_fsp":c=l.SyncType.FSp;break;case"music_icon_fdx":c=l.SyncType.FDX;break;case"music_icon_fdxp":c=l.SyncType.FDXp;break;case"music_icon_sync":c=l.SyncType.SYNC;break;default:c=l.SyncType.none}switch(e.querySelectorAll(".h_30.f_r")[1].getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_icon_fc":o=l.ComboType.FC;break;case"music_icon_fcp":o=l.ComboType.FCp;break;case"music_icon_ap":o=l.ComboType.AP;break;case"music_icon_app":o=l.ComboType.APp;break;default:o=l.ComboType.none}s.push({name:a,chartType:r,level:n,difficulty:l.DifficultyNumber[t],achievement:i,dxScore:p,syncType:c,comboType:o,playCount:0})}for(let e of p){let r,a=e.querySelector(".music_name_block").textContent.replace(/[\t\n]+/g,"");switch(e.querySelector(".music_kind_icon").getAttribute("src").split("?")[0].split("/").pop().replace(".png","")){case"music_standard":r=l.ChartType.STD;break;case"music_dx":r=l.ChartType.DX;break;default:r=-1}let c=e.querySelector(".music_score_block").textContent.replace(/[\t\n]+/g,"").split("：")[1];y.push({name:a,chartType:r,difficulty:t,playCount:c})}for(let e of s){let t=y.find(t=>t.name===e.name&&t.chartType===e.chartType&&t.difficulty===e.difficulty);t&&(e.playCount=parseInt(t.playCount||"0")),r.data.records.push(e)}return r.data.difficulty=t,r};const l=r(10)},418:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t={type:"playerData",data:{playerName:"",rating:0,title:{type:l.TitleType.Normal,text:""},avatar:"",overviewData:{},course:"",class:"",playCount:{all:0,current:0}}},r=await fetch("https://maimaidx-eng.com/maimai-mobile/playerData"),c=(new DOMParser).parseFromString(await r.text(),"text/html");if(!c)return null;const o=c.querySelector(".name_block");if(!o)return null;let n=o.textContent;t.data.playerName=n;let i=c.querySelector(".rating_block");if(!i)return null;let p=i.textContent;t.data.rating=parseInt(p);let s=c.querySelector(".trophy_inner_block");if(!s)return null;let y={text:s.textContent.replace(/[\t\n]+/g,""),type:l.TitleType.Normal};c.querySelector(".trophy_Normal")?y.type=l.TitleType.Normal:c.querySelector(".trophy_Bronze")?y.type=l.TitleType.Bronze:c.querySelector(".trophy_Silver")?y.type=l.TitleType.Silver:c.querySelector(".trophy_Gold")?y.type=l.TitleType.Gold:c.querySelector(".trophy_Rainbow")&&(y.type=l.TitleType.Rainbow),t.data.title=y;let u=c.querySelector(".basic_block > img")?.src;t.data.avatar=u,t.data.overviewData={};let _=c.querySelectorAll(".musiccount_block");for(let e=0;e<_.length;e++){const r=a.indexDefine[e];if("string"==typeof r){let l=_[e]?.textContent||"";l=l.replace(/[\t\n]+/g,"").replace(/,/g,""),t.data.overviewData[r]=l.split("/").map(e=>parseInt(e))}}let f=c.querySelectorAll(".h_35.f_l")[0],d=c.querySelectorAll(".h_35.f_l")[1];if(!f||!d)return null;let m=f.getAttribute("src"),S=d.getAttribute("src");if(!m||!S)return null;t.data.course=m,t.data.class=S;let b=c.querySelector(".m_5.m_b_5.t_r.f_12");if(!b)return null;let g=b.innerHTML.replace("<br>","\n"),x=parseInt(g.split("\n")[1]?.split("：")[1]||"0"),h=parseInt(g.split("\n")[0]?.split("：")[1]||"0");return t.data.playCount={all:x,current:h},t};const l=r(10),a=r(678)},678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DifficultyStringId=t.indexDefine=void 0;const l=r(10);t.indexDefine=["SSSp","APp","SSS","AP","SSp","FCp","SS","FC","Sp","FDXp","S","FDX","CLEAR","FSp","dxstar_5","FS","dxstar_4","SYNCPLAY","dxstar_3","dxstar_2","dxstar_1"];const a={[l.Difficulty.Basic]:"basic",[l.Difficulty.Advanced]:"advanced",[l.Difficulty.Expert]:"expert",[l.Difficulty.Master]:"master",[l.Difficulty.ReMaster]:"remaster"};t.DifficultyStringId=a},865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t,r=e.data.split("__")[1],c={type:"recentDetail",data:{}},o=await fetch(`https://maimaidx-eng.com/maimai-mobile/record/playlogDetail?idx=${r}`),n=(new DOMParser).parseFromString(await o.text(),"text/html"),i=n.querySelector(".p_10.t_l.f_0.v_b"),p=parseInt(i.querySelectorAll(".playlog_top_container.p_r > .sub_title > span")[0]?.textContent.replace(/TRACK /g,"")||"-1"),s=new Date(`${i.querySelectorAll(".playlog_top_container.p_r > .sub_title > span")[1]?.textContent} GMT+9`);t=i.querySelector(".playlog_remaster_container")?a.Difficulty.ReMaster:i.querySelector(".playlog_master_container")?a.Difficulty.Master:i.querySelector(".playlog_expert_container")?a.Difficulty.Expert:i.querySelector(".playlog_advanced_container")?a.Difficulty.Advanced:a.Difficulty.Basic;let y,u=i.querySelector(`.playlog_${l.DifficultyStringId[t]}_container > .basic_block`).textContent.replace(i.querySelector(".w_80.f_r > .music_lv_back").textContent,"").replace(/[\t\n]+/g,""),_=i.querySelector(".w_80.f_r > .music_lv_back").textContent,f=i.querySelector(".playlog_music_kind_icon").getAttribute("src").split("?")[0].split("/");switch(f[f.length-1]?.replace(".png","")){case"music_standard":y=a.ChartType.STD;break;case"music_dx":y=a.ChartType.DX}let d=parseFloat(i.querySelector(".playlog_achievement_txt").textContent.replace("%","")),m=!!i.querySelector(".playlog_achievement_newrecord");console.log(i.querySelector(".playlog_score_block").textContent);let S,b,g=i.querySelector(".playlog_score_block").textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e.replace(/,/g,""))),x=!!i.querySelector(".playlog_deluxscore_newrecord");if(null===i.querySelector(".playlog_deluxscore_star"))S=0;else{let e=i.querySelector(".playlog_deluxscore_star").getAttribute("src").split("?")[0].split("/");switch(e[e.length-1]?.replace(".png","")){case"dxstar_1":S=1;break;case"dxstar_2":S=2;break;case"dxstar_3":S=3;break;case"dxstar_4":S=4;break;case"dxstar_5":S=5;break;default:S=0}}let h,T=i.querySelectorAll(".playlog_result_innerblock > img")[0].getAttribute("src").split("?")[0].split("/");switch(T[T.length-1]?.replace(".png","")){case"fc":b=a.ComboType.FC;break;case"fcplus":b=a.ComboType.FCp;break;case"ap":b=a.ComboType.AP;break;case"applus":b=a.ComboType.APp;break;default:b=a.ComboType.none}let C=i.querySelectorAll(".playlog_result_innerblock > img")[1].getAttribute("src").split("?")[0].split("/");switch(C[C.length-1]?.replace(".png","")){case"sync":h=a.SyncType.SYNC;break;case"fs":h=a.SyncType.FS;break;case"fsplus":h=a.SyncType.FSp;break;case"fsd":h=a.SyncType.FDX;break;case"fsdplus":h=a.SyncType.FDXp;break;default:h=a.SyncType.none}let k={},q=n.querySelector(".playlog_notes_detail"),D=["","tap","hold","slide","touch","break"];for(let e=1;e<D.length;e++)q.querySelectorAll("tr")[e].querySelectorAll("td").forEach(t=>{let r=0===t.textContent.trim().length?"-":t.textContent.trim();k[D[e]||0]||(k[D[e]||0]=[]),k[D[e]||0]?.push(r)});let A=n.querySelectorAll(".gray_block > .p_5 > .col2 > .playlog_score_block")[0].textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e)),v=n.querySelectorAll(".gray_block > .p_5 > .col2 > .playlog_score_block")[1].textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e)),w=[];return n.querySelectorAll(".playlog_fl_block > .w_96.f_l.t_r > .p_t_5").forEach(e=>w.push(parseInt(e.textContent.replace(/[\t\n]+/g,"")))),c.data={track:p,time:s,difficulty:t,chartType:y,level:_,songName:u,achievement:d,achievementNewRecord:m,dxScore:g,dxScoreNewRecord:x,dxStar:S,fcType:b,syncType:h,fastLate:{fast:w[0],late:w[1]},idx:r,noteDetail:k,combo:A,sync:v},c};const l=r(678),a=r(10)},953:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){let t={type:"recentAll",data:{records:[]}},r=await fetch("https://maimaidx-eng.com/maimai-mobile/record/");return(new DOMParser).parseFromString(await r.text(),"text/html").querySelectorAll(".p_10.t_l.f_0.v_b").forEach(e=>{const r=e.querySelectorAll(".playlog_top_container.p_r > .sub_title > span");if(!r)return;let c,o=parseInt(r[0]?.textContent?.replace(/TRACK /g,"")||"0"),n=new Date(`${r[1]?.textContent||""} GMT+9`);c=e.querySelector(".playlog_remaster_container")?a.Difficulty.ReMaster:e.querySelector(".playlog_master_container")?a.Difficulty.Master:e.querySelector(".playlog_expert_container")?a.Difficulty.Expert:e.querySelector(".playlog_advanced_container")?a.Difficulty.Advanced:a.Difficulty.Basic;const i=e.querySelector(`.playlog_${l.DifficultyStringId[c]}_container > .basic_block`);if(!i)return;let p,s=i.textContent.replace(e.querySelector(".w_80.f_r > .music_lv_back").textContent,"").replace(/[\t\n]+/g,""),y=e.querySelector(".w_80.f_r > .music_lv_back").textContent,u=e.querySelector(".playlog_music_kind_icon").getAttribute("src").split("?")[0].split("/");switch(u[u.length-1]?.replace(".png","")){case"music_standard":p=a.ChartType.STD;break;case"music_dx":p=a.ChartType.DX}let _,f,d=parseFloat(e.querySelector(".playlog_achievement_txt").textContent.replace("%","")),m=!!e.querySelector(".playlog_achievement_newrecord"),S=e.querySelector(".playlog_score_block").textContent.replace(/[\t\n]+/g,"").split("/").map(e=>parseInt(e.replace(/,/g,""))),b=!!e.querySelector(".playlog_deluxscore_newrecord");if(null===e.querySelector(".playlog_deluxscore_star"))_=0;else{let t=e.querySelector(".playlog_deluxscore_star").getAttribute("src").split("?")[0].split("/");switch(t[t.length-1]?.replace(".png","")){case"dxstar_1":_=1;break;case"dxstar_2":_=2;break;case"dxstar_3":_=3;break;case"dxstar_4":_=4;break;case"dxstar_5":_=5;break;default:_=0}}let g,x=e.querySelectorAll(".playlog_result_innerblock > img")[0].getAttribute("src").split("?")[0].split("/");switch(x[x.length-1]?.replace(".png","")){case"fc":f=a.ComboType.FC;break;case"fcplus":f=a.ComboType.FCp;break;case"ap":f=a.ComboType.AP;break;case"applus":f=a.ComboType.APp;break;default:f=a.ComboType.none}let h=e.querySelectorAll(".playlog_result_innerblock > img")[1].getAttribute("src").split("?")[0].split("/");switch(h[h.length-1]?.replace(".png","")){case"sync":g=a.SyncType.SYNC;break;case"fs":g=a.SyncType.FS;break;case"fsplus":g=a.SyncType.FSp;break;case"fsd":g=a.SyncType.FDX;break;case"fsdplus":g=a.SyncType.FDXp;break;default:g=a.SyncType.none}let T={track:o,time:n,difficulty:c,chartType:p,level:y,songName:s,achievement:d,achievementNewRecord:m,dxScore:S,dxScoreNewRecord:b,dxStar:_,fcType:f,syncType:g,idx:e.querySelector('form > input[name="idx"]').getAttribute("value")};t.data.records.push(T)}),t};const l=r(678),a=r(10)}},t={};!function r(l){var a=t[l];if(void 0!==a)return a.exports;var c=t[l]={exports:{}};return e[l].call(c.exports,c,c.exports,r),c.exports}(156)})();